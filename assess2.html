<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Skill Quest Adventure</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Chewy&display=swap');
    body{font-family:'Chewy',cursive;background:url('images/cloud.jpg') no-repeat center center fixed;background-size:cover;margin:0;padding:0;color:#333}
    .container{max-width:1000px;margin:0 auto;padding:2rem;background-color:rgba(255,255,255,.9);border-radius:20px}
    .stage-header{background:#ffe4ec;border-radius:20px;padding:1rem;margin-top:2rem;text-align:center;font-size:2rem;color:#ff3e83}
    .section{margin:2rem 0;background:#fff8dc;border:4px dashed #ff69b4;border-radius:20px;padding:1.5rem;box-shadow:5px 5px 15px rgba(0,0,0,.1)}
    .question{font-size:1.4rem;margin-bottom:1rem}
    .options button{display:block;width:100%;background-color:#ffb6c1;border:none;padding:12px;margin:.5rem 0;border-radius:12px;cursor:pointer;font-size:1.1rem}
    .options button:hover{background-color:#ffa1bd}
    .game-box{text-align:center}
    canvas{border:3px solid #ff69b4;background-color:#fff;border-radius:12px;margin-top:1rem}
    .ai-img{width:200px;height:100px;object-fit:cover;margin:5px;border-radius:12px;border:2px solid transparent;cursor:pointer;transition:transform .08s ease,border-color .08s ease}
    .ai-img:hover{border-color:#ff69b4;transform:translateY(-2px)}
    .hidden{display:none}
    .cpu-area{display:grid;gap:12px;justify-items:center}
    .cpu-row{display:flex;flex-wrap:wrap;gap:10px;justify-content:center}
    .card{background:linear-gradient(135deg,#fff0f6,#ffeef7);border:2px solid #ff69b4;border-radius:14px;padding:10px 14px;min-width:130px;text-align:center;cursor:grab;user-select:none;box-shadow:2px 2px 0 rgba(0,0,0,.08);font-size:1.05rem}
    .dropzone{width:140px;min-height:54px;border:3px dashed #ff69b4;border-radius:14px;display:flex;align-items:center;justify-content:center;background:#fff;color:#ff3e83;font-weight:700;padding:6px 8px;transition:border-color .1s ease,background .1s ease}
    .dropzone.filled{background:#fff5fb}
    .btn{background:#ff69b4;color:#fff;border:none;border-radius:12px;padding:10px 16px;cursor:pointer;font-size:1rem}
    .btn:hover{background:#ff4c9a}
    .timer-badge{display:inline-flex;align-items:center;gap:6px;background:#ffeaf3;border:2px solid #ff69b4;color:#ff3e83;padding:6px 10px;border-radius:20px;font-weight:700;font-size:.95rem}
  </style>
</head>
<body>
  <div class="container">
    <h1 style="text-align:center; font-size:2.8rem; color:#ff4c87;">üåü Skill Quest Adventure üåü</h1>

    <div class="stage-header">üí° Scenario-Based Questions</div>
    <div class="section">
      <div class="question">What is the output of the following Python code?
        <pre>
def calc():
    x = 5
    def inner():
        return x + 1
    return inner()
print(calc())</pre>
      </div>
      <div class="options">
        <button onclick="alert('‚úÖ Correct!')">6</button>
        <button onclick="alert('‚ùå Incorrect')">5</button>
        <button onclick="alert('‚ùå Incorrect')">Error</button>
      </div>
    </div>

    <div class="section">
      <div class="question">What is the time complexity of binary search?</div>
      <div class="options">
        <button onclick="alert('‚úÖ Correct!')">O(log n)</button>
        <button onclick="alert('‚ùå Incorrect')">O(n)</button>
        <button onclick="alert('‚ùå Incorrect')">O(n^2)</button>
      </div>
    </div>

    <div class="stage-header" id="ai-header-1">üß† AI Image Spotting ‚Äì Level 1</div>
    <div class="section game-box" id="ai-level-1">
      <div class="question">Click the AI-generated image</div>
      <img class="ai-img" src="images/realfrog1.PNG" alt="frog real 1" onclick="alert('‚ùå Real image')">
      <img class="ai-img" src="images/Aifrog.PNG" alt="frog ai" onclick="nextAILevel(1)">
      <img class="ai-img" src="images/realfrog2.PNG" alt="frog real 2" onclick="alert('‚ùå Real image')">
    </div>

    <div class="stage-header hidden" id="ai-header-2">üß† AI Image Spotting ‚Äì Level 2</div>
    <div class="section game-box hidden" id="ai-level-2">
      <div class="question">Click the AI-generated image</div>
      <img class="ai-img" src="images/realchina1.PNG" alt="china real 1" onclick="alert('‚ùå Real image')">
      <img class="ai-img" src="images/realchina2.PNG" alt="china real 2" onclick="alert('‚ùå Real image')">
      <img class="ai-img" src="images/Aichina.PNG" alt="china ai" onclick="nextAILevel(2)">
      <img class="ai-img" src="images/realchina3.PNG" alt="china real 3" onclick="alert('‚ùå Real image')">
    </div>

    <div class="stage-header hidden" id="ai-header-3">üß† AI Image Spotting ‚Äì Level 3</div>
    <div class="section game-box hidden" id="ai-level-3">
      <div class="question">Click the AI-generated image</div>
      <img class="ai-img" src="images/realface1.PNG" alt="face real 1" onclick="alert('‚ùå Real image')">
      <img class="ai-img" src="images/realface2.PNG" alt="face real 2" onclick="alert('‚ùå Real image')">
      <img class="ai-img" src="images/realface3.PNG" alt="face real 3" onclick="alert('‚ùå Real image')">
      <img class="ai-img" src="images/Aiface.PNG" alt="face ai" onclick="finishAILevels()">
      <img class="ai-img" src="images/realface4.PNG" alt="face real 4" onclick="alert('‚ùå Real image')">
    </div>

    <div class="stage-header">üéØ Cute Maze (3 Levels)</div>
    <div class="section game-box">
      <p>Use arrow keys to reach the ‚≠ê star! Complete 3 levels of increasing difficulty and try to follow the shortest path!</p>
      <canvas id="mazeCanvas" width="300" height="300"></canvas>
    </div>

    <div class="stage-header" id="cpu-header-1">
      üõ†Ô∏è CPU Rush ‚Äì Level 1
      &nbsp; <span class="timer-badge">‚è≥ <span id="cpu1-timer">60</span>s</span>
    </div>
    <div class="section" id="cpu-level-1">
      <div class="question">Arrange the CPU pipeline stages in the correct order (drag & drop).</div>
      <div class="cpu-area">
        <div class="cpu-row" id="cpu1-pool"></div>
        <div class="cpu-row" id="cpu1-slots"></div>
        <button class="btn" onclick="checkCpuLevel1()">Check</button>
      </div>
    </div>

    <div class="stage-header hidden" id="cpu-header-2">
      üõ†Ô∏è CPU Rush ‚Äì Level 2
      &nbsp; <span class="timer-badge">‚è≥ <span id="cpu2-timer">50</span>s</span>
    </div>
    <div class="section hidden" id="cpu-level-2">
      <div class="cpu-area">
        <div class="cpu-row" id="cpu2-pool"></div>
        <div class="cpu-row">
          <div class="dropzone" data-bin="L1">L1</div>
          <div class="dropzone" data-bin="L2">L2</div>
          <div class="dropzone" data-bin="RAM">RAM</div>
        </div>
        <button class="btn" onclick="checkCpuLevel2()">Check</button>
      </div>
    </div>

    <div class="stage-header hidden" id="cpu-header-3">
      üõ†Ô∏è CPU Rush ‚Äì Level 3
      &nbsp; <span class="timer-badge">‚è≥ <span id="cpu3-timer">45</span>s</span>
    </div>
    <div class="section hidden" id="cpu-level-3">
      <div class="question">Resolve the hazard by inserting a bubble (NOP) where needed.</div>
      <div class="cpu-area">
        <div class="cpu-row" id="cpu3-pool"></div>
        <div class="cpu-row" id="cpu3-slots"></div>
        <button class="btn" onclick="checkCpuLevel3()">Check</button>
      </div>
    </div>
  </div>

  <script>
    let aiTransitioning=false;
    function nextAILevel(c){if(aiTransitioning)return;aiTransitioning=true;alert('‚úÖ Correct!');if(c===1){document.getElementById('ai-level-1').classList.add('hidden');document.getElementById('ai-header-1').classList.add('hidden');document.getElementById('ai-header-2').classList.remove('hidden');document.getElementById('ai-level-2').classList.remove('hidden');document.getElementById('ai-level-2').scrollIntoView({behavior:'smooth',block:'center'})}else if(c===2){document.getElementById('ai-level-2').classList.add('hidden');document.getElementById('ai-header-2').classList.add('hidden');document.getElementById('ai-header-3').classList.remove('hidden');document.getElementById('ai-level-3').classList.remove('hidden');document.getElementById('ai-level-3').scrollIntoView({behavior:'smooth',block:'center'})}setTimeout(()=>aiTransitioning=false,200)}
    function finishAILevels(){alert('üèÜ You passed all image levels!')}

    const canvas=document.getElementById('mazeCanvas');const ctx=canvas.getContext('2d');const size=15;const cell=canvas.width/size;
    let maze=[];let player={x:0,y:0};let level=1;
    function generateSolvableMaze(d){let m;let a=0;do{m=[];for(let y=0;y<size;y++){const r=[];for(let x=0;x<size;x++){r.push(Math.random()<d?1:0)}m.push(r)}m[0][0]=0;m[size-1][size-1]=0;a++}while(!isSolvable(m)&&a<15);return m}
    function isSolvable(mz){const v=Array.from({length:size},()=>Array(size).fill(false));const q=[[0,0]];v[0][0]=true;while(q.length){const [x,y]=q.shift();if(x===size-1&&y===size-1)return true;[[0,1],[1,0],[0,-1],[-1,0]].forEach(([dx,dy])=>{const nx=x+dx,ny=y+dy;if(nx>=0&&ny>=0&&nx<size&&ny<size&&!v[ny][nx]&&mz[ny][nx]===0){v[ny][nx]=true;q.push([nx,ny])}})}return false}
    function drawMaze(){ctx.clearRect(0,0,canvas.width,canvas.height);for(let y=0;y<size;y++){for(let x=0;x<size;x++){if(maze[y][x]===1){ctx.fillStyle='#ff69b4';ctx.fillRect(x*cell,y*cell,cell,cell)}}}ctx.fillStyle='blue';ctx.fillRect(player.x*cell+5,player.y*cell+5,cell-10,cell-10);ctx.fillStyle='gold';ctx.fillRect((size-1)*cell+8,(size-1)*cell+8,cell-16,cell-16)}
    function setupLevel(){const d=[0.2,0.3,0.4];maze=generateSolvableMaze(d[level-1]);player={x:0,y:0};drawMaze()}
    document.addEventListener('keydown',e=>{let dx=0,dy=0;if(e.key==='ArrowUp')dy=-1;else if(e.key==='ArrowDown')dy=1;else if(e.key==='ArrowLeft')dx=-1;else if(e.key==='ArrowRight')dx=1;const nx=player.x+dx;const ny=player.y+dy;if(nx>=0&&nx<size&&ny>=0&&ny<size&&maze[ny][nx]===0){player.x=nx;player.y=ny;drawMaze();if(player.x===size-1&&player.y===size-1){if(level<3){alert('üéâ Level '+level+' complete! Moving to next.');level++;setupLevel()}else{alert('üèÜ You completed all maze levels!')}}}});
    setupLevel();

    let dragId=null;
    function makeDraggable(el){el.setAttribute('draggable','true');el.addEventListener('dragstart',()=>{dragId=el.id;tryStartTimerForCurrentLevel()})}
    function makeDropzone(zone){zone.addEventListener('dragover',e=>e.preventDefault());zone.addEventListener('drop',e=>{e.preventDefault();tryStartTimerForCurrentLevel();if(!dragId)return;if(zone.firstElementChild){document.getElementById('cpu-pool-dump').appendChild(zone.firstElementChild);zone.classList.remove('filled')}const d=document.getElementById(dragId);zone.appendChild(d);zone.classList.add('filled');dragId=null})}

    let cpuTimerId=null;
    const cpuTimerConfig={1:{spanId:'cpu1-timer',seconds:60,started:false,remaining:60,warned:false},2:{spanId:'cpu2-timer',seconds:50,started:false,remaining:50,warned:false},3:{spanId:'cpu3-timer',seconds:45,started:false,remaining:45,warned:false}};
    let currentCpuLevel=1;

    function warnBeep(){const ctxA=new (window.AudioContext||window.webkitAudioContext)();function tone(f,d,dt){const o=ctxA.createOscillator();const g=ctxA.createGain();o.type='sine';o.frequency.value=f;o.connect(g);g.connect(ctxA.destination);o.start();g.gain.setValueAtTime(.001,ctxA.currentTime);g.gain.exponentialRampToValueAtTime(.2,ctxA.currentTime+.02);g.gain.exponentialRampToValueAtTime(.0001,ctxA.currentTime+d);o.stop(ctxA.currentTime+d+dt)}tone(880,.15,.02);setTimeout(()=>tone(660,.15,.02),180)}

    function startCpuTimer(level,onExpire){
      clearInterval(cpuTimerId);
      const cfg=cpuTimerConfig[level];if(!cfg)return;
      const span=document.getElementById(cfg.spanId);
      cpuTimerId=setInterval(()=>{
        cfg.remaining--;span.textContent=cfg.remaining;
        if(cfg.remaining===5&&!cfg.warned){cfg.warned=true;warnBeep()}
        if(cfg.remaining<=0){clearInterval(cpuTimerId);cfg.started=false;cfg.remaining=cfg.seconds;span.textContent=cfg.remaining;onExpire&&onExpire()}
      },1000);
    }

    document.addEventListener('visibilitychange',()=>{
      const cfg=cpuTimerConfig[currentCpuLevel];if(!cfg)return;
      const span=document.getElementById(cfg.spanId);
      if(document.hidden){clearInterval(cpuTimerId)}
      else{if(cfg.started&&cfg.remaining>0){span.textContent=cfg.remaining;startCpuTimer(currentCpuLevel,()=>{if(currentCpuLevel===1){alert('‚è∞ Time up! Try Level 1 again.');resetCpuLevel1()}else if(currentCpuLevel===2){alert('‚è∞ Time up! Try Level 2 again.');resetCpuLevel2()}else if(currentCpuLevel===3){alert('‚è∞ Time up! Try Level 3 again.');resetCpuLevel3()}})}}
    });

    function tryStartTimerForCurrentLevel(){
      const cfg=cpuTimerConfig[currentCpuLevel];if(!cfg||cfg.started)return;
      const headerVisible=document.getElementById(`cpu-header-${currentCpuLevel}`).offsetParent!==null;
      const sectionVisible=document.getElementById(`cpu-level-${currentCpuLevel}`).offsetParent!==null;
      if(!headerVisible||!sectionVisible)return;
      cfg.started=true;cfg.warned=false;cfg.remaining=cfg.seconds;
      document.getElementById(cfg.spanId).textContent=cfg.remaining;
      startCpuTimer(currentCpuLevel,()=>{if(currentCpuLevel===1){alert('‚è∞ Time up! Try Level 1 again.');resetCpuLevel1()}else if(currentCpuLevel===2){alert('‚è∞ Time up! Try Level 2 again.');resetCpuLevel2()}else if(currentCpuLevel===3){alert('‚è∞ Time up! Try Level 3 again.');resetCpuLevel3()}})
    }

    function resetCpuLevel1(){const pool=document.getElementById('cpu1-pool');document.querySelectorAll('#cpu1-slots .dropzone').forEach(z=>{if(z.firstElementChild)pool.appendChild(z.firstElementChild);z.classList.remove('filled')});}
    function resetCpuLevel2(){const pool=document.getElementById('cpu2-pool');document.querySelectorAll('#cpu-level-2 .dropzone').forEach(z=>{if(z.firstElementChild)pool.appendChild(z.firstElementChild);z.classList.remove('filled')});}
    function resetCpuLevel3(){const pool=document.getElementById('cpu3-pool');document.querySelectorAll('#cpu3-slots .dropzone').forEach(z=>{if(z.firstElementChild)pool.appendChild(z.firstElementChild);z.classList.remove('filled')});}

    const cpu1Order=["FETCH","DECODE","EXECUTE","MEMORY","WRITEBACK"];
    (function initCpu1(){
      const pool=document.getElementById('cpu1-pool');const slots=document.getElementById('cpu1-slots');
      const dump=document.createElement('div');dump.id='cpu-pool-dump';dump.style.display='none';document.body.appendChild(dump);
      const names={FETCH:"FETCH",DECODE:"DECODE",EXECUTE:"EXECUTE",MEMORY:"MEMORY",WRITEBACK:"WRITEBACK"};
      const shuffled=cpu1Order.slice().sort(()=>Math.random()-.5);
      shuffled.forEach(name=>{const c=document.createElement('div');c.className='card';c.id='cpu1-card-'+name;c.textContent=names[name];makeDraggable(c);pool.appendChild(c)});
      for(let i=0;i<cpu1Order.length;i++){const dz=document.createElement('div');dz.className='dropzone';dz.dataset.index=i;dz.textContent=`Slot ${i+1}`;makeDropzone(dz);slots.appendChild(dz)}
    })();

    function checkCpuLevel1(){
      const zones=[...document.querySelectorAll('#cpu1-slots .dropzone')];
      const picked=zones.map(z=>z.firstElementChild?z.firstElementChild.textContent.trim():null);
      const ok=picked.every((p,i)=>p===cpu1Order[i]);
      if(ok){clearInterval(cpuTimerId);cpuTimerConfig[1].started=false;cpuTimerConfig[1].remaining=cpuTimerConfig[1].seconds;document.getElementById('cpu1-timer').textContent=cpuTimerConfig[1].remaining;alert('‚úÖ Perfect! Level 2 unlocked');document.getElementById('cpu-level-1').classList.add('hidden');document.getElementById('cpu-header-1').classList.add('hidden');document.getElementById('cpu-header-2').classList.remove('hidden');document.getElementById('cpu-level-2').classList.remove('hidden');document.getElementById('cpu-level-2').scrollIntoView({behavior:'smooth',block:'center'});currentCpuLevel=2}
      else{alert('‚ùå Not correct. Try again!');resetCpuLevel1()}
    }

    const cpu2Items=[{id:'req1',text:'Recent small var',bin:'L1'},{id:'req2',text:'Medium array loop',bin:'L2'},{id:'req3',text:'Large cold file',bin:'RAM'}];
    (function initCpu2(){
      const pool=document.getElementById('cpu2-pool');
      cpu2Items.forEach(it=>{const c=document.createElement('div');c.className='card';c.id='cpu2-card-'+it.id;c.textContent=it.text;c.dataset.bin=it.bin;makeDraggable(c);pool.appendChild(c)});
      document.querySelectorAll('#cpu-level-2 .dropzone').forEach(makeDropzone);
    })();

    function checkCpuLevel2(){
      const zones=[...document.querySelectorAll('#cpu-level-2 .dropzone')];
      const ok=zones.every(z=>{const child=z.firstElementChild;return child&&child.dataset.bin===z.dataset.bin});
      if(ok){clearInterval(cpuTimerId);cpuTimerConfig[2].started=false;cpuTimerConfig[2].remaining=cpuTimerConfig[2].seconds;document.getElementById('cpu2-timer').textContent=cpuTimerConfig[2].remaining;alert('‚úÖ Great! Level 3 unlocked');document.getElementById('cpu-level-2').classList.add('hidden');document.getElementById('cpu-header-2').classList.add('hidden');document.getElementById('cpu-header-3').classList.remove('hidden');document.getElementById('cpu-level-3').classList.remove('hidden');document.getElementById('cpu-level-3').scrollIntoView({behavior:'smooth',block:'center'});currentCpuLevel=3}
      else{alert('‚ùå Some requests are in the wrong memory.');resetCpuLevel2()}
    }

    const cpu3Order=["LOAD R1, [X]","NOP (bubble)","ADD R2, R1, #1","STORE [Y], R2"];
    (function initCpu3(){
      const pool=document.getElementById('cpu3-pool');const slots=document.getElementById('cpu3-slots');
      const cards=["LOAD R1, [X]","ADD R2, R1, #1","STORE [Y], R2","NOP (bubble)"].sort(()=>Math.random()-.5);
      cards.forEach(txt=>{const c=document.createElement('div');c.className='card';c.id='cpu3-card-'+txt.replace(/[^a-z0-9]/gi,'');c.textContent=txt;makeDraggable(c);pool.appendChild(c)});
      for(let i=0;i<4;i++){const dz=document.createElement('div');dz.className='dropzone';dz.dataset.index=i;dz.textContent=`Step ${i+1}`;makeDropzone(dz);slots.appendChild(dz)}
    })();

    function checkCpuLevel3(){
      const zones=[...document.querySelectorAll('#cpu3-slots .dropzone')];
      const picked=zones.map(z=>z.firstElementChild?z.firstElementChild.textContent.trim():null);
      const ok=picked.every((p,i)=>p===cpu3Order[i]);
      if(ok){clearInterval(cpuTimerId);cpuTimerConfig[3].started=false;cpuTimerConfig[3].remaining=cpuTimerConfig[3].seconds;document.getElementById('cpu3-timer').textContent=cpuTimerConfig[3].remaining;alert('üèÜ CPU Rush complete! Great job!')}
      else{alert('‚ùå Hazard not resolved. Insert a bubble after LOAD and try again.');resetCpuLevel3()}
    }
  </script>
</body>
</html>
